
<h2>Transfusion Orders View</h2>
<table id="transfusion-orders-table">

    {{!-- Header section --}}
    <thead>

        {{!-- For just the first row, we print each key of the row object as a header cell so we
        know what each column means when the page renders --}}
        <tr>
            {{#each transfusionorders.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>

    {{!-- Body section --}}
    <tbody>

        {{!-- For each row, print the id, fname, lname, homeworld and age, in order --}}
        {{#each transfusionorders}}
        <tr>
            <td>{{this.TransfusionID}}</td>
            <td>{{this.PatientName}}</td>
            <td>{{this.NurseName}}</td>
            <td>{{moment this.Date format="DD-MM-YYYY HH:MM:SS"}}</td>
            <td>{{this.Description}}</td>
            <td>{{this.InfusionRate}}</td>
            <td><button id="editButton" onclick="showEditForm('{{this.TransfusionID}}')">Edit</button></td>
            <td><button onclick="deleteTransfusion({{this.TransfusionID}})">Delete</button></td>
        </tr>
        {{/each}}
    </tbody>
</table> 

<h2>Transfusion Details View</h2>
<table id="transfusion-details-table">

    {{!-- Header section --}}
    <thead>

        {{!-- For just the first row, we print each key of the row object as a header cell so we
        know what each column means when the page renders --}}
        <tr>
            {{#each data.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
        </tr>
    </thead>

    {{!-- Body section --}}
    <tbody>

        {{!-- For each row, print the id, fname, lname, homeworld and age, in order --}}
        {{#each data}}
        <tr>
            <td>{{this.TransfusionID}}</td>
            <td>{{this.PatientName}}</td>
            <td>{{this.NurseName}}</td>
            <td>{{this.ProductTypeID}}</td>
            <td>{{this.BloodTypeID}}</td>
            <td>{{this.Volume}}</td>
            <td>{{this.InfusionRate}}</td>
            
        </tr>
        {{/each}}
    </tbody>
</table> 



{{!-- Form to add a record to the table  --}}
<div id="add-section">
<h2>Add New Transfusion Order</h2>
<p>To add a new transfusion order, please enter the information below and click 'Submit'!</p>
<form id="add-transfusion-order-form-ajax">
    <label for="input-patient">Patient Name: </label>
    <select name="input-patient" id="input-patient">
        <option value="">Select a Patient</option>
        {{#each patients}}
        <option value="{{this.PatientID}}">{{this.Name}}</option>
        {{/each}}
    </select> <br><br>

    <label for="input-nurse">Nurse Name: </label>
    <select name="input-nurse" id="input-nurse">
        <option value="">Select a Nurse</option>
        {{#each nurses}}
        <option value="{{this.NurseID}}">{{this.Name}}</option>
        {{/each}}
    </select> <br><br>
    
    <label for="input-date-time">Date and Time: </label>
    <input type="datetime-local" name="input-date-time" id="input-date-time"> <br><br>

    <label for="input-description">Description: </label>
    <input type="text" name="input-description" id="input-description"> <br><br>

    <label for="input-infusion-rate">Infusion Rate mL/hr: </label>
    <input type="number" name="input-infusion-rate" id="input-infusion-rate"> <br><br>

    {{! Trying to add a button to trigger a script to add a new form field }}
    {{! Let's try making a table ? And then the click can add rows? }}

    <table id="blood-product-table">
        <tr>
            <th>Blood Product ID</th>
            <th>Volume</th>
        </tr>
        <tr>
            <td>
                <select name="input-blood-product-id" id="input-blood-product-id">
                <option value="">Select a Blood Product</option>
                {{#each bloodproducts}}
                <option value="{{this.BloodProductID}}">{{this.BloodTypeID}}  {{this.ProductTypeID}}</option>
                {{/each}}
                </select>
            </td>
            <td>
               <input type="number" name="input-volume" id="input-volume"> 
            </td>
        </tr>
    </table>
    <button id="add-blood-product" onclick="addBloodProduct()">Add Blood Product</button>

    <br><br>

    <label for="input-blood-product-id">BloodProductID: </label>
    <select name="input-blood-product-id" id="input-blood-product-id">
        <option value="">Select a Blood Product</option>
        {{#each bloodproducts}}
        <option value="{{this.BloodProductID}}">{{this.BloodTypeID}}  {{this.ProductTypeID}}</option>
        {{/each}}
    </select> 
    <label for="input-volume">Volume: </label>
    <input type="number" name="input-volume" id="input-volume">
    <br>
    <br><br>
    <input type="submit">
</form>

{{!-- Embed our javascript to handle the DOM manipulation and AJAX request --}}
<script src="./js/add-transfusion-order.js"></script>
</div>